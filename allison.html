<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Anotações.ctx</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title level-1'>BAT</h1><br/><p></p><p></p><p>			Brasilian Advanced Team</p><p></p><p>	Time que consiste em ajudar no aprimoramento mutuo de pessoas seletas. Duração de 16 meses dividido em três modulos</p></div><div class='page'><h1 class='title level-2'>ISF</h1><br/></div><div class='page'><h1 class='title level-3'>AULAS</h1><br/></div><div class='page'><h1 class='title level-1'>DESEC</h1><br/></div><div class='page'><h1 class='title level-2'>DOMINANDO O TERMINAL DO LINUX:</h1><br/><p>	Gerenciando Usuário:</p><p>• adduser  // adiciona um novo usuário</p><p></p><p>• useradd -d /opt/desec -s /bin/bash  // criar usuario com as especificações passadas</p><p></p><p>• deluser // deleta usuário</p><p></p><p>• /etc/passwd  //arquivo que contém os usuários do sistema</p><p></p><p>• /etc/sudoers  //arquivo que grava usuários sudo</p><p></p><p></p><p></p><p>	Gerenciado Rede:</p><p>◇ /etc/network/interfaces  // arquivo de configuração da placa de rede</p><p></p><p>◇ /etc/init.d/networking restart   // restarta as configurações de rede</p><p></p><p>◇ service network restart  // restarta as configurações de rede</p><p></p><p>◇ route -n // mostra o gateway</p><p></p><p>◇ route del default  // deleta rota default</p><p></p><p>◇ netstat -lntp  // visualiza os programas executados</p><p></p><p></p><p></p><p>	Editores de Texto:</p><p>◇ control w  // faz uma pesquisa no arquivo com o nano</p><p></p><p></p><p></p><p>	Trabalhando com pacotes:</p><p>◇ /etc/apt &amp;&amp; nano source.list   // arquivo com os repositórios do linux</p><p></p><p>◇ dpkg -i    // instala programas com a extensão .deb</p><p></p><p>◇ dpkg -l   // mostrar todos os programas instalados no sistema</p><p></p><p></p><p></p><p>	Trabalhando com serviços:</p><p>◇ update-rc.d ssh enable   // comando que faz o ssh iniciar junto com sistema</p><p></p><p></p><p></p><p>	Localizando arquivos:</p><p>◇ locate</p><p></p><p>◇ whereis</p><p></p><p>◇ which    // procura somente o binário </p><p></p><p>◇ find / -name nome.txt</p><p></p><p></p><p></p><p>	<span style="background-color:#000000;">Ganhando</span> tempo:</p><p>◇ grep -v “nologin”  // o -v irá remover as linhas com a string passada do resultado</p><p></p><p>◇ egrep -v “nologin|/bin/bash”   // egrep consegue trabalhar com mais de uma condição para o resultado, no caso ele exclui as linhas com nologin e bin bash</p><p></p><p>◇ awk -F : ‘{print $1}’  // o comando -F define o separador das palavras, fazendo assim imprimir a primeira coluna.</p><p></p><p>◇ cut -d : -f1  // mesma função do awk. o -d é o delimitador. Irá imprimir a primeira coluna</p><p></p><p>◇ sed ‘s/EVE/FEV/’  // comando de substituição, o parâmetro s/ é para substituir EVE pelo segundo FEV.</p><p></p><p></p></div><div class='page'><h1 class='title level-2'>DOMINANDO O PROMPT DO WINDOWS:</h1><br/><p></p><p></p><p><strong>• echo %cd%   // mostra qual diretório estamos</strong></p><p><strong></strong></p><p><strong>• type  // visualizar arquivo</strong></p><p><strong></strong></p><p><strong>• attrib +h  // oculta o arquivo</strong></p><p><strong></strong></p><p><strong>• attrib -h  // remove a ocultação do arquivo</strong></p><p><strong></strong></p><p><strong>• dir /a  // visualizar arquivo oculto</strong></p><p><strong></strong></p><p><strong>• dir /S desec.txt    //procura arquivo</strong></p><p><strong></strong></p><p><strong>• netstat -n   // mostra todas as conexões estabelecidas</strong></p><p><strong></strong></p><p><strong>• tasklist   // mostra os processos ativos</strong></p><p><strong></strong></p><p><strong>• taskkill -pid  // encerra o processo</strong></p><p><strong></strong></p><p><strong></strong></p><p><strong></strong></p></div><div class='page'><h1 class='title level-2'>VISÃO GERAL SOBRE WEB E HTTP</h1><br/><p></p><p><strong>• Status 200  : requisição bem sucedida</strong></p><p><strong></strong></p><p><strong>• Status 300 : o recurso foi movido ou redirecionado</strong></p><p><strong></strong></p><p><strong>• Status 403  : o cliente não tem permissão</strong></p><p><strong></strong></p><p><strong>• Status 404  : recurso não encontrado</strong></p><p><strong></strong></p><p><strong>• Status 500 : erro no servidor</strong></p><p><strong></strong></p><p><strong></strong></p><p><strong></strong></p><p><strong></strong>Entendendo o lado do servidor:</p><p>◇ Para se prevenir da vulnerabilidade de listagem de diretórios quando não se tem o arquivo index.html, basta entrar nas configurações do apache em /etc/apache2/apache2.conf. Dentro do arquivo procure por &lt;Directory /var/www/&gt;</p><p></p><p></p><p>Haverá uma opção de Indexes, remova essa opção e salve o arquivo.</p><p>◇ Remover o banner do apache. Entre no arquivo /etc/apache2/conf-enable/security.conf. Altere as opções de ServerTokens para Prod</p><p></p><p></p><p></p><p>Entendendo o lado do cliente:</p><p>◇ GET / HTTP/1.0</p><p></p><p>◇ HEAD / HTTP/1.0  // MOSTRA INFORMAÇÕES DO SERVIDOR</p><p></p><p>◇ OPTIONS / HTTP/1.0</p><p></p><p></p></div><div class='page'><h1 class='title level-2'>ANÁLISE DE LOGS:</h1><br/><p></p><p><strong>• wc -l  // mostra a quantidade de linhas do arquivo</strong></p><p><strong></strong></p><p><strong></strong></p><p><strong></strong>	Entenda como o arquivo funciona com head -n1</p><p> </p><p>◇ cat access.log | cut -d “ “ -f1 // mostra a primeira coluna do arquivo</p><p></p><p>◇ sort -u // mostra os números sem se repetir</p><p></p><p>◇ sort -un // mostra os números em ordem numérica</p><p></p><p>◇ uniq -c  // mostra o número de ocorrências para cada ip</p><p></p><p></p></div><div class='page'><h1 class='title level-2'>TCP/IP PARA PENTESTERS</h1><br/><p></p><p>	Introdução às Redes TCP/IP:</p><p></p><p>• Os 3 primeiros bytes de um mac indica o seu fabricante.</p><p></p><p>• <a href="https://macvendors.com/">https://macvendors.com/</a>   //site para consultar fabricante do mac</p><p></p><p>• Portas default:</p><p></p><p>	◇ 80 HTTP</p><p></p><p>	◇ 443 HTTPS</p><p></p><p>	◇ 25 SMTP</p><p></p><p>	◇ 161 SNMP</p><p></p><p>	◇ 23 TELNET</p><p></p><p>	◇ 21 FTP</p><p></p><p>	◇ 22 SSH</p><p></p><p></p><p>◇ SOCKET = IP:PORTA  ex: 192.168.254.222:8080</p><p></p><p></p><p></p><p>Introdução às Redes TCP/IP  (prática):</p><p></p><p>	◇ cat /etc/services    //mostra arquivos de portas no linux</p><p></p><p>	◇ macchanger -r eth0   //altera aleatoriamente o mac da máquina</p><p></p><p>	◇ macchanger -p eth0  // volta ao mac original</p><p></p><p>	◇ macchanger -m 00:15:78:45:96:46 eth0  //altera o mac manualmente</p><p></p><p>	◇ ipcalc   //calcula a rede pelo ip</p><p></p><p></p><p></p><p>Protocolos ethernet:</p><p></p><p>	◇ Mac de destino, Mac de origem, Tipo, Payload, checksum.</p><p></p><p>	◇ Tipo = código que identifica o protocolo. Ex : 0800 = IP/ 0806 = ARP</p><p></p><p>	◇ O tamanho máximo do payload é de 1500 bytes</p><p></p><p></p><p></p><p>Protocolo ARP:</p><p></p><p>	◇ Descobre qual endereço mac está relacionado ao um determinado IP</p><p></p><p>	◇ ARP Request = faz a pergunta quem tem tal IP e qual seu endereço mac</p><p></p><p>	◇ ARP Reply = resposta com o mac do arp request</p><p></p><p></p><p></p><p>Protocolo TCP/IP:</p><p></p><p>	◇ SYN = INICIA A CONEXÃO</p><p></p><p>	◇ FIN = FINALIZA A CONEXÃO</p><p></p><p>	◇ RST = INDICA RESETAR OU A COMUNICAÇÃO NÃO FOI ENTENDIDA</p><p></p><p>	◇ PSH = INDICA DADOS NO PAYLOAD</p><p></p><p>	◇ ACK = FAZ A CONFIRMAÇÃO INDICANDO QUAL SERÁ O PRÓXIMO NÚMERO</p><p></p><p>	◇ URG = URGÊNCIA </p><p></p><p></p><p>Protocolo HTTP:</p><p></p><p>   ▪ GET, POST, HEAD, PUT, DELETE, OPTIONS</p><p></p><p></p><p></p><p>Protocolo ICMP:</p><p></p><p>	◇ Tipo:</p><p></p><p>	◇ 0 - echo reply</p><p></p><p>	◇ 8  - echo request</p><p></p><p>	◇ 11 - time exceeded</p><p></p><p>	◇ 3 - destination unreachable</p><p></p><p></p><p></p><p>Time To Live - TTL:</p><p></p><p>	◇ O windows usa o padrão de 128</p><p></p><p>	◇ O linux usa o padrão de 64</p><p></p><p>	◇ O Unix usa o padrão de 255</p><p></p><p></p><p></p><p>Bytes na Rede:</p><p></p><p>	◇ Os 6 primeiros bytes são o MAC de destino, logo em seguida temos o MAC de origem</p><p></p><p>	◇ Nos próximos 2 bytes temos o protocolo.</p><p></p><p>	◇ O próximo byte é dividido em dois dando meio byte para o Version IP e o IHL</p><p></p><p>	◇ O próximo byte é o ToS</p><p></p><p>	◇ O próximos 2 bytes são o Total Length</p><p></p><p>	◇ Identification leva 2 bytes</p><p></p><p>	◇ Flags 1 byte</p><p></p><p>	◇ Fragment offset 1 byte</p><p></p><p>	◇ TTL 1 byte</p><p></p><p>	◇ Protocol 1 byte</p><p></p><p>	◇ Checksum 2 bytes</p><p></p><p>	◇ IP de origem 4 bytes</p><p></p><p>	◇ IP de destino 4 bytes</p><p></p><p>	◇ Porta de origem 2 bytes</p><p></p><p>	◇ Porta de destino 2 bytes</p><p></p><p>	◇ Sequence Number 4 byteswl</p><p></p><p>	◇ Acknowledgment 4 bytes</p><p></p><p>	◇ Data offset Meio byte</p><p></p><p>	◇ No byte após o data offset no 14 byte fica as flags</p><p>	</p><p>	◇ Para converter byte para decimal : printf “%d\n” 0x0181</p><p></p><p></p><p></p><p></p><p></p><p>Site para decode : <a href="http://www.hpd.gasmi.net">http://www.hpd.gasmi.net</a> </p><p></p><p></p><p>URG = 32</p><p>ACK = 16</p><p>PSH = 8</p><p>RST = 4</p><p>SYN = 2</p><p>FIN = 1</p><p></p><p> A soma dos valores tem que dá o valor do data offset</p><p></p></div><div class='page'><h1 class='title level-1'>DESEC GRATIS</h1><br/></div><div class='page'><h1 class='title level-1'>TRY HACKME</h1><br/></div><div class='page'><h1 class='title level-1'>HTBOX</h1><br/></div><div class='page'><h1 class='title level-1'>TCM</h1><br/></div><div class='page'><h1 class='title level-1'>FERRAMENTAS</h1><br/></div><div class='page'><h1 class='title level-1'>PARA TESTAR</h1><br/></div><div class='page'><h1 class='title level-1'>LIVROS</h1><br/></div><div class='page'><h1 class='title level-1'>CONCEITOS FORA</h1><br/></div>
</body>
</html>
